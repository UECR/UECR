!function(){"use strict";function a(a,b){a.hashPrefix(""),b.when("/",{templateUrl:"views/home.html",controller:"HomeCtrl",controllerAs:"Home"}).when("/championships",{templateUrl:"views/championships.html",controller:"ChampionshipsCtrl",controllerAs:"Championships"}).when("/championships/:cid",{templateUrl:"views/championship.html",controller:"ChampionshipCtrl",controllerAs:"Championship"}).when("/championships/:cid/races",{templateUrl:"views/races.html",controller:"RacesCtrl",controllerAs:"Races"}).when("/championships/:cid/races/:rid",{templateUrl:"views/race.html",controller:"RaceCtrl",controllerAs:"Race"}).when("/drivers",{templateUrl:"views/drivers.html",controller:"DriversCtrl",controllerAs:"Drivers"}).when("/drivers/:did",{templateUrl:"views/driver.html",controller:"DriverCtrl",controllerAs:"Driver"}).when("/teams",{templateUrl:"views/teams.html",controller:"TeamsCtrl",controllerAs:"Teams"}).when("/hall-of-fame",{templateUrl:"views/hall-of-fame.html",controller:"HofCtrl",controllerAs:"Hof"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}function b(a){a.load()}angular.module("uecr",["ngAnimate","ngRoute","ngTouch","ui.bootstrap"]).config(a).run(b),a.$inject=["$locationProvider","$routeProvider"],b.$inject=["DataHelper"]}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.name=a.name}function b(){this.list=[],c.forEach(function(b){this.list.push(new a(b))},this)}var c=[{id:1,name:"PC"},{id:2,name:"Xbox One"},{id:3,name:"PS4"}];return b.prototype.getId=function(a){return this.list.find(function(b){return b.id===a})},new b}angular.module("uecr").factory("Platforms",a)}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.name=a.name,this.platforms=[],this.refs={platforms:a.platforms}}function b(){this.list=[],c.forEach(function(b){this.list.push(new a(b))},this)}var c=[{id:1,name:"Forza Motorsport 6",platforms:[2]},{id:2,name:"Project Cars",platforms:[1,2]},{id:3,name:"Forza Motorsport 7",platforms:[1,2]}];return b.prototype.getId=function(a){return this.list.find(function(b){return b.id===a})},b.prototype.getForplatform=function(a){return this.list.filter(function(b){return void 0!=b.platforms.find(function(b){return b===a})})},new b}angular.module("uecr").factory("Games",a)}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.name=a.name}function b(){this.list=[],c.forEach(function(b){this.list.push(new a(b))},this)}var c=[{id:1,name:"Brands Hatch"},{id:2,name:"Bernese Alps"},{id:3,name:"Circuit de Catalunya"},{id:4,name:"Circuit de Spa Francorchamps"},{id:5,name:"Daytona International Speedway"},{id:6,name:"Indianapolis Motor Speedway"},{id:7,name:"Le Mans Circuit de la Sarthe"},{id:8,name:"Lime Rock Park"},{id:9,name:"Long Beach"},{id:10,name:"Mazda Raceway Laguna Seca"},{id:11,name:"Mount Panorama Circuit (Bathurst)"},{id:12,name:"NÃ¼rburgring"},{id:13,name:"Prague"},{id:14,name:"Rio"},{id:15,name:"Road America"},{id:16,name:"Road Atlanta"},{id:17,name:"Sebring International Raceway"},{id:18,name:"Silverstone"},{id:19,name:"Test Track"},{id:20,name:"Top Gear"},{id:21,name:"Yas Marina"}];return b.prototype.getId=function(a){return this.list.find(function(b){return b.id===a})},new b}angular.module("uecr").factory("Tracks",a)}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.date=a.date,this.laps=a.laps,this.completed=a.completed,this.results=[],this.refs={championship:a.championship,track:a.track,results:a.results}}function b(){this.list=[],c.forEach(function(b){this.list.push(new a(b))},this)}var c=[{id:1,date:"15/01/2017",championship:1,track:1,results:[1,2]},{id:2,date:"22/01/2017",championship:1,track:2,results:[2,1]},{id:3,date:"29/01/2017",championship:1,track:3,results:[1,2]},{id:4,date:"05/02/2017",championship:1,track:4,results:[2,1]},{id:5,date:"12/02/2017",championship:1,track:5,results:[1,2]},{id:6,date:"04/02/2017",championship:2,track:6,results:[2,1]},{id:7,date:"11/02/2017",championship:2,track:7,results:[2,1]},{id:8,date:"18/02/2017",championship:2,track:8,results:[]},{id:9,date:"25/02/2017",championship:2,track:9,results:[]},{id:10,date:"04/03/2017",championship:2,track:10,results:[]}];return b.prototype.getId=function(a){return this.list.find(function(a){return a.id===this},a)},b.prototype.getForChampionship=function(a){return this.list.filter(function(b){return b.championship===a})},new b}angular.module("uecr").factory("Races",a)}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.points=a.points}function b(){this.list=[],c.forEach(function(b){this.list.push(new a(b))},this)}var c=[{id:1,points:[25,18,15,12,10,8,6,4,2,1]}];return a.prototype.forPosition=function(a){return 1>a||a>this.points.length?0:this.points[a-1]},b.prototype.getId=function(a){return this.list.find(function(b){return b.id===a})},new b}angular.module("uecr").factory("Points",a)}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.name=a.name,this.number=a.number,this.championships=[]}function b(){this.list=[],c.forEach(function(b){this.list.push(new a(b))},this)}var c=[{id:1,name:"Forza Raivo",number:"23"},{id:2,name:"MrCableswitch",number:"44"}];return b.prototype.getId=function(a){return this.list.find(function(b){return b.id===a})},b.prototype.getForChampionship=function(a){return this.list.filter(function(b){return void 0!=b.championships.find(function(b){return b.id===a})})},new b}angular.module("uecr").factory("Drivers",a)}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.name=a.name}function b(){this.list=[],c.forEach(function(b){this.list.push(new a(b))},this)}var c=[{id:1,name:"UECR A"},{id:2,name:"UECR B"}];return b.prototype.getId=function(a){return this.list.find(function(b){return b.id===a})},new b}angular.module("uecr").factory("Teams",a)}(),function(){"use strict";function a(){function a(a){this.id=a.id,this.name=a.name,this.entrants=[],this.races=[],this.refs={game:a.game,points:a.points,entrants:a.entrants}}function b(){this.list=[],d.forEach(function(b){this.list.push(new a(b))},this)}function c(a,b){this.championship=a,this.driver=b,this.points=0,this.position=0,this.results=[]}var d=[{id:1,name:"V8 Supercars",game:1,points:1,entrants:[{driver:1,team:1},{driver:2,team:2}]},{id:2,name:"GTE Speciale",game:1,points:1,entrants:[{driver:1,team:1},{driver:2,team:2}]}];return a.prototype.getEntrant=function(a){return this.entrants.find(function(b){return b.driver.id===a})},a.prototype.getState=function(){return"Active"},b.prototype.getId=function(a){return this.list.find(function(b){return b.id===a})},b.prototype.getForDriver=function(a){return this.list.filter(function(b){var c=b.getDriversWithTeam();return void 0!=c.find(function(b){return b.driver.id===a})})},c.prototype.addResult=function(a){this.points+=this.championship.getPointSystem().forPosition(a),this.results.push(a)},new b}angular.module("uecr").factory("Championships",a)}(),function(){"use strict";function a(){function a(a){this.entrant=a,this.position=0,this.positions=[],this.races=0,this.podiums=0,this.wins=0,this.points=0}function b(){this.entrantMap=new Map,this.entrants=[]}function c(){return new b}return a.prototype.addResult=function(a,b){this.races++,this.positions.push(a),4>a&&(this.podiums++,1===a&&this.wins++),this.points+=b},b.prototype.sort=function(){this.entrantMap.forEach(function(a){this.entrants.push(a)},this),this.entrants.sort(function(a,b){return a.points===b.points?a.entrant.name<b.entrant.name?-1:1:a.points>b.points?-1:1}),this.entrants.forEach(function(a,b){a.position=b+1})},b.prototype.getEntrant=function(a){return this.entrantMap.get(a)},b.prototype.addEntrant=function(b){this.entrantMap.has(b.id)||this.entrantMap.set(b.id,new a(b))},{create:c}}angular.module("uecr").factory("Leaderboards",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){k(),l(),m()}function k(){b.list.forEach(function(b){b.refs.platforms.forEach(function(c){b.platforms.push(a.getId(c))})})}function l(){g.list.forEach(function(a){a.championship=h.getId(a.refs.championship),a.championship.races.push(a),a.track=c.getId(a.refs.track),a.refs.results.forEach(function(b){a.results.push(e.getId(b))})})}function m(){h.list.forEach(function(a){a.game=b.getId(a.refs.game),a.points=d.getId(a.refs.points),a.races.forEach(function(a,b){a.number=b+1}),a.driverLeaderboard=i.create(),a.teamLeaderboard=i.create(),n(a),o(a)})}function n(a){a.refs.entrants.forEach(function(b){var c={driver:e.getId(b.driver)};c.driver.championships.push(a),a.driverLeaderboard.addEntrant(c.driver),b.team&&(c.team=f.getId(b.team),a.teamLeaderboard.addEntrant(c.team)),a.entrants.push(c)})}function o(a){a.races.forEach(function(b){for(var c=1;c<=b.results.length;c++){var d=a.getEntrant(b.results[c-1].id),e=a.points.forPosition(c),f=a.driverLeaderboard.getEntrant(d.driver.id);if(f.addResult(c,e),d.team){var g=a.teamLeaderboard.getEntrant(d.team.id);g.addResult(c,e)}}}),a.driverLeaderboard.sort(),a.teamLeaderboard.sort()}var p={load:j};return p}angular.module("uecr").factory("DataHelper",a),a.$inject=["Platforms","Games","Tracks","Points","Drivers","Teams","Races","Championships","Leaderboards"]}(),function(){"use strict";function a(){return{restrict:"E",scope:{appName:"@"},controller:b,controllerAs:"navigate",templateUrl:"views/navigation.html"}}function b(a,b,c){function d(){var b=a.path();angular.forEach(f.links,function(a){a.active=a.path==="#/"+b.split("/",2)[1]?!0:!1})}function e(a){f.isCollapsed=!f.isCollapsed,a.stopPropagation()}var f=this;f.appName=b.appName,f.isCollapsed=!0,f.toggle=e,f.links=[{name:"Home",path:"#/"},{name:"Championships",path:"#/championships"},{name:"Drivers",path:"#/drivers"},{name:"Hall of Fame",path:"#/hall-of-fame"},{name:"About",path:"#/about"}],d(),b.$on("$locationChangeSuccess",d),c.on("click touchend",function(a){$(a.target).closest("#nav-container").length||b.$apply(function(){f.isCollapsed=!0})})}angular.module("uecr").directive("navigation",a),b.$inject=["$location","$scope","$document"]}(),function(){"use strict";function a(a){var b=this;b.active=function(b){return a.path()==b}}angular.module("uecr").controller("Navigation",a),a.$inject=["$location"]}(),function(){"use strict";function a(){}angular.module("uecr").controller("HomeCtrl",a)}(),function(){"use strict";function a(a,b){function c(b){a.path("/championships/"+b.id)}var d=this;d.list=b.list,d.onClick=c}angular.module("uecr").controller("ChampionshipsCtrl",a),a.$inject=["$location","Championships"]}(),function(){"use strict";function a(a,b,c){function d(){b.path(b.path()+"/races")}function e(a){b.path("/drivers/"+a.entrant.id)}var f=this,g=parseInt(a.cid,10);(isNaN(g)||1>g)&&b.path("/"),f.championship=c.getId(g),void 0===f.championship&&b.path("/"),f.onCalendarClick=d,f.onDriverClick=e}angular.module("uecr").controller("ChampionshipCtrl",a),a.$inject=["$routeParams","$location","Championships"]}(),function(){"use strict";function a(a,b,c){function d(a){b.path(b.path()+"/"+a.number)}var e=this,f=parseInt(a.cid,10);(isNaN(f)||1>f)&&b.path("/"),e.championship=c.getId(f),void 0===e.championship&&b.path("/"),e.onRaceClick=d}angular.module("uecr").controller("RacesCtrl",a),a.$inject=["$routeParams","$location","Championships"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a){b.path("/drivers/"+a.id)}var g=this,h=parseInt(a.cid,10),i=parseInt(a.rid,10);(isNaN(h)||isNaN(i)||1>h||1>i)&&b.path("/"),g.championship=c.getId(h),(void 0===g.championship||g.championship.races.length<i)&&b.path("/"),g.race=g.championship.races[i-1],g.onDriverClick=f}angular.module("uecr").controller("RaceCtrl",a),a.$inject=["$routeParams","$location","Championships","Races","Drivers"]}(),function(){"use strict";function a(a,b){function c(b){a.path("/drivers/"+b.id)}var d=this;d.list=b.list,d.onClick=c}angular.module("uecr").controller("DriversCtrl",a),a.$inject=["$location","Drivers"]}(),function(){"use strict";function a(a,b,c){function d(a){b.path("/championships/"+a.id)}var e=this,f=parseInt(a.did,10);(isNaN(f)||1>f)&&b.path("/"),e.driver=c.getId(f),void 0===e.driver&&b.path("/"),e.stats={races:0,podiums:0,wins:0,points:0},e.championships=[],e.driver.championships.forEach(function(a){var b=a.driverLeaderboard.getEntrant(e.driver.id);e.championships.push({id:a.id,name:a.name,position:b.position,points:b.points,state:a.getState()}),e.stats.races+=b.races,e.stats.podiums+=b.podiums,e.stats.wins+=b.wins,e.stats.points+=b.points}),e.onClick=d}angular.module("uecr").controller("DriverCtrl",a),a.$inject=["$routeParams","$location","Drivers"]}(),function(){"use strict";function a(a,b){function c(a){}var d=this;d.list=b.list,d.onClick=c}angular.module("uecr").controller("TeamsCtrl",a),a.$inject=["$location","Teams"]}(),function(){"use strict";function a(){}angular.module("uecr").controller("HofCtrl",a)}(),function(){"use strict";function a(){}angular.module("uecr").controller("AboutCtrl",a)}(),angular.module("uecr").run(["$templateCache",function(a){"use strict";a.put("views/about.html","<p>Some info will go here...</p>"),a.put("views/championship.html",'<div class="u-crumbs"> <ul> <li> <a href="#/championships">Championships</a> </li> <li> <a ng-href="#/championships/{{Championship.championship.id}}">{{Championship.championship.name}}</a> </li> </ul> </div> <h1>{{Championship.championship.name}}</h1> <button class="btn btn-default" type="button" ng-click="Championship.onCalendarClick()">View Race Calendar</button> <h3>Leaderboard</h3> <table class="table table-hover"> <thead> <tr> <th class="col-xs-2">Position</th> <th class="col-xs-4">Driver</th> <th class="col-xs-2">Points</th> </tr> </thead> <tbody> <tr ng-repeat="entrant in Championship.championship.driverLeaderboard.entrants" ng-click="Championship.onDriverClick(entrant)"> <td class="col-xs-2">{{entrant.position}}</td> <td class="col-xs-4">{{entrant.entrant.name}}</td> <td class="col-xs-2">{{entrant.points}}</td> </tr> </tbody> </table>'),a.put("views/championships.html",'<div class="u-crumbs"> <ul> <li> <a href="#/championships">Championships</a> </li> </ul> </div> <div class="panel panel-default"> <table class="table table-hover"> <thead> <tr> <th class="col-xs-4">Championship Name</th> <th class="col-xs-3">State</th> <th class="col-xs-2">Race Day</th> </tr> </thead> <tbody> <tr ng-repeat="c in Championships.list" ng-click="Championships.onClick(c)"> <td class="col-xs-4">{{c.name}}</td> <td class="col-xs-3"><span class="glyphicon glyphicon-stop" ng-class="{\'state-active\': c.getState() == \'Active\'}"></span>&nbsp;{{c.getState()}}</td> <td class="col-xs-2">Sunday</td> </tr> </tbody> </table> </div>'),a.put("views/driver.html",'<div class="u-crumbs"> <ul> <li> <a href="#/drivers">Drivers</a> </li> <li> <a ng-href="#/drivers/{{Driver.driver.id}}">{{Driver.driver.name}}</a> </li> </ul> </div> <h2>Profile: {{Driver.driver.name}}</h2> <p>Races: {{Driver.stats.races}}</p> <p>Podiums: {{Driver.stats.podiums}}</p> <p>Wins: {{Driver.stats.wins}}</p> <p>Points: {{Driver.stats.points}}</p> <h1>Championships:</h1> <table class="table table-hover"> <thead> <tr> <th class="col-xs-4">Name</th> <th class="col-xs-2">Position</th> <th class="col-xs-2">Points</th> <th class="col-xs-2">State</th> </tr> </thead> <tbody> <tr ng-repeat="c in Driver.championships" ng-click="Driver.onClick(c)"> <td class="col-xs-4">{{c.name}}</td> <td class="col-xs-2">{{c.position}}</td> <td class="col-xs-2">{{c.points}}</td> <td class="col-xs-2">{{c.state}}</td> </tr> </tbody> </table>'),a.put("views/drivers.html",'<div class="u-crumbs"> <ul> <li> <a href="#/drivers">Drivers</a> </li> </ul> </div> <div class="panel panel-default"> <table class="table table-hover"> <thead> <tr> <th class="col-xs-4">Name</th> <th class="col-xs-4">No. of championships</th> </tr> </thead> <tbody> <tr ng-repeat="d in Drivers.list" ng-click="Drivers.onClick(d)"> <td class="col-xs-4">{{d.name}}</td> <td class="col-xs-4">{{d.championships.length}}</td> </tr> </tbody> </table> </div>'),a.put("views/hall-of-fame.html","<p>Hall of fame will go here...</p>"),a.put("views/home.html","<h3>Welcome to Ultimate Endurance Championship Racing!</h3>"),a.put("views/navigation.html",'<div class="navbar-header" id="nav-container"> <button type="button" class="navbar-toggle collapsed" ng-click="navigate.toggle($event)"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">{{navigate.appName}}</a> </div> <div class="collapse navbar-collapse" uib-collapse="navigate.isCollapsed"> <ul class="nav navbar-nav"> <li ng-repeat="link in navigate.links" ng-click="navigate.isCollapsed = true" ng-class="{active: link.active, dropdown: link.dropdown}"> <a href="{{link.path}}" ng-if="!link.dropdown">{{link.name}}</a> <a href="{{link.path}}" ng-if="link.dropdown" class="dropdown-toggle" data-toggle="dropdown">{{link.name}}<span class="caret"></span></a> </li> </ul> </div>'),a.put("views/race.html",'<div class="u-crumbs"> <ul> <li> <a href="#/championships">Championships</a> </li> <li> <a ng-href="#/championships/{{Race.championship.id}}">{{Race.championship.name}}</a> </li> <li> <a ng-href="#/championships/{{Race.championship.id}}/races">Races</a> </li> <li> <a ng-href="#/championships/{{Race.championship.id}}/races/{{Race.race.number}}">Race {{Race.race.number}}</a> </li> </ul> </div> <h3>Race Details</h3> <p>Championship: Round {{Race.race.number}}</p> <p>Date: {{Race.race.date}}</p> <p>Track: {{Race.race.track.name}}</p> <div ng-show="Race.race"> <h3>Race Result:</h3> <table class="table table-hover"> <thead> <tr> <th class="col-xs-2">Position</th> <th class="col-xs-4">Driver</th> </tr> </thead> <tbody> <tr ng-repeat="d in Race.race.results" ng-click="Race.onDriverClick(d)"> <td class="col-xs-2">{{$index + 1}}</td> <td class="col-xs-4">{{d.name}}</td> </tr> </tbody> </table> </div>'),a.put("views/races.html",'<div class="u-crumbs"> <ul> <li> <a href="#/championships">Championships</a> </li> <li> <a ng-href="#/championships/{{Races.championship.id}}">{{Races.championship.name}}</a> </li> <li> <a ng-href="#/championships/{{Races.championship.id}}/races">Races</a> </li> </ul> </div> <h1>Race Calendar</h1> <table class="table table-hover"> <thead> <tr> <th class="col-xs-2">Date</th> <th class="col-xs-4">Track</th> </tr> </thead> <tbody> <tr ng-repeat="r in Races.championship.races" ng-click="Races.onRaceClick(r)"> <td class="col-xs-4">{{r.date}}</td> <td class="col-xs-2">{{r.track.name}}</td> </tr> </tbody> </table>'),a.put("views/teams.html",'<div class="u-crumbs"> <ul> <li> <a href="#/teams">Teams</a> </li> </ul> </div> <div class="panel panel-default"> <table class="table table-hover"> <thead> <tr> <th class="col-xs-4">Name</th> </tr> </thead> <tbody> <tr ng-repeat="t in Teams.list" ng-click="Teams.onClick(t)"> <td class="col-xs-4">{{t.name}}</td> </tr> </tbody> </table> </div>')}]);